<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tic Tac Toe</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
  </head>
  <body>
    <div class="container">
      <!-- Header Section -->
       <div class="page-header">
        <h1>Tic Tac Toe</h1>
      </div>
    

      <div class="information">
        <!-- About Section -->
        <div class="about">
          <h2>About</h2>
          <p>
            Welcome to Tic Tac Toe! This is a simple and exciting two-player game
            where each player takes turns marking a space in a 3x3 grid. The first
            player to get three of their marks in a row (vertically, horizontally,
            or diagonally) wins!
          </p>

          <p>Are you ready to play?</p>

          <p>Good luck and have fun!</p>
        </div>

        <!-- Instructions Section -->
        <div class="instructions">
          <h2>Instructions</h2>
          <p>Follow these steps to play the game:</p>
          <ol>
            <li>Click on any cell in the grid to make your move.</li>
            <li>Players alternate turns, with one playing "X" and the other "O".</li>
            <li>The game ends when a player gets three marks in a row or when all cells are filled.</li>
            <li>If the game is a draw, you can reset and try again!</li>
          </ol>
        </div>
      </div>
      

      <div class="game-display">

        <h2>Game Board</h2>

        <!-- Game audio-->
        <audio id="click-sound" src="{{ url_for('static', filename='audio/sci-fi.wav') }}" volume="1.0" preload="auto"></audio>
        <!-- audio test button<button onclick="document.getElementById('click-sound').play()">Play Sound</button> -->
        <button onclick="document.getElementById('click-sound').play()">Play Sound</button>


        <!-- Board -->
        <div class="board">
          {% for index in range(9) %}
            <a href="{{ url_for('play', cell=index) }}" class="cell" id="cell-{{ index }}">{{ board[index] }}</a>
          {% endfor %}
        </div>
        

        <!-- Result Section -->
        <div class="result">
          {% if winner %}
          <p>Player {{ winner }} wins!</p>
          {% elif draw %}
          <p>It's a draw!</p>
          {% else %}
          <p>Current Player: {{ current_player }}</p>
          {% endif %}
        </div>

        <!-- Reset Button -->
        <a href="{{ url_for('reset') }}" class="reset-button">Reset Game</a>
      </div>

      <div class="player-stats">
        <h3>Player Stats:</h3>
        Currently Not Available 
      </div>

      <!-- Footer Section -->
      <footer class="footer">
        <p>&copy; 2024 Tic Tac Toe Game. Created by Anthony, Yehor, Khoi and Sahan.</p>
        <p>
          NMTAFE | Cert IV Programming | Semester 2
        </p>
      </footer>
    </div>

    <script>
      
      document.addEventListener("DOMContentLoaded", function() {
        const clickSound = document.getElementById("click-sound");
        const cells = document.querySelectorAll(".cell");
      
        cells.forEach(cell => {
          cell.addEventListener("click", function(event) {
            event.preventDefault(); 
            const cellId = this.getAttribute("href");
      
            // Play sound
            clickSound.play().catch(error => {
              console.error("Failed to play sound:", error);
            });
      
            // move to server using AJAX
            fetch(cellId, {
              method: 'GET'
            }).then(response => response.text()).then(data => {
              // Update the game state: debugging logs
              console.log('Move processed:', data);
            }).catch(error => {
              console.error("Error:", error);
            });
          });
        });
      });
           
    </script>
    
  </body>
</html>
